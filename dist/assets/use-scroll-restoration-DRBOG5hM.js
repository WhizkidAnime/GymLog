import{r as n}from"./vendor-CITejod9.js";function u({key:t,enabled:r}){const c=n.useRef(!1),s=n.useRef(0);n.useEffect(()=>{if(r)try{const e=localStorage.getItem(t);if(e){const o=parseInt(e,10);Number.isNaN(o)||(c.current=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.scrollTo({top:o,behavior:"auto"}),s.current=o,setTimeout(()=>{c.current=!1},100)})}))}}catch{}},[r,t]),n.useEffect(()=>{if(!r)return;let e=!1;const o=()=>{s.current=window.scrollY,!e&&!c.current&&(window.requestAnimationFrame(()=>{try{localStorage.setItem(t,String(s.current))}catch{}e=!1}),e=!0)};return window.addEventListener("scroll",o,{passive:!0}),()=>window.removeEventListener("scroll",o)},[r,t]),n.useEffect(()=>{if(r)return()=>{if(s.current>0)try{localStorage.setItem(t,String(s.current))}catch{}}},[r,t])}export{u};
