import{s as re,j as e,u as me}from"./index-CJw7GFC8.js";import{r as s,c as pe,e as he}from"./vendor-BVca5W6X.js";import{C as ce}from"./confirm-dialog-DcyhSJuk.js";import{T as ge}from"./template-saved-dialog-B-wwOG0d.js";import{R as xe,L as fe,C as we,X as be,Y as ye,T as ke,a as je}from"./charts-33RH-A39.js";import"./supabase-CWpvgLJU.js";import"./use-modal-scroll-lock-DlG-D3y9.js";async function Ne(){const t=re,{error:l}=await t.rpc("delete_user_account");if(l)throw l}function ve({userId:t}){const l=re,[n,a]=s.useState(!1),[r,c]=s.useState([]),[d,C]=s.useState(!1),[v,u]=s.useState(""),[f,k]=s.useState(()=>new Date().toISOString().slice(0,10)),[W,o]=s.useState(!1),[m,p]=s.useState(null),[j,R]=s.useState(!1),[z,N]=s.useState(null),S=s.useRef(null),Y=s.useCallback(async()=>{if(t){C(!0);try{const{data:g,error:b}=await l.from("user_body_weights").select("*").eq("user_id",t).order("recorded_at",{ascending:!1}).limit(100);if(b)throw b;c(g||[])}catch(g){console.error("Error loading body weights:",g)}finally{C(!1)}}},[t,l]),M=s.useCallback(async()=>{if(!t||!v||W)return;const g=parseFloat(v.replace(",","."));if(isNaN(g)||g<=0||g>500){alert("Введите корректный вес (от 0.1 до 500 кг)");return}o(!0);try{const{data:b,error:F}=await l.from("user_body_weights").upsert({user_id:t,weight:g,recorded_at:f},{onConflict:"user_id,recorded_at"}).select().single();if(F)throw F;c(B=>{const H=B.filter(U=>U.recorded_at!==f);return[b,...H].sort((U,q)=>new Date(q.recorded_at).getTime()-new Date(U.recorded_at).getTime())}),u(""),k(new Date().toISOString().slice(0,10))}catch(b){console.error("Error saving weight:",b),alert("Не удалось сохранить вес")}finally{o(!1)}},[t,v,f,W,l]),J=s.useCallback(async g=>{if(!(!t||m)){p(g);try{const{error:b}=await l.from("user_body_weights").delete().eq("id",g);if(b)throw b;c(F=>F.filter(B=>B.id!==g)),R(!1),N(null)}catch(b){console.error("Error deleting weight:",b),alert("Не удалось удалить запись")}finally{p(null)}}},[t,m,l]),h=s.useCallback(g=>{N(g),R(!0)},[]),$=s.useMemo(()=>[...r].sort((g,b)=>new Date(g.recorded_at).getTime()-new Date(b.recorded_at).getTime()).slice(-30).map(g=>({date:new Date(g.recorded_at).toLocaleDateString("ru",{day:"numeric",month:"short"}),weight:Number(g.weight),fullDate:g.recorded_at})),[r]),w=s.useMemo(()=>{if(r.length===0)return null;const g=r.map(U=>Number(U.weight)),b=g[0],F=Math.min(...g),B=Math.max(...g),H=r.length>1?b-g[g.length-1]:0;return{current:b,min:F,max:B,change:H}},[r]);return{isWeightTrackerOpen:n,bodyWeights:r,loadingWeights:d,newWeight:v,newWeightDate:f,savingWeight:W,deletingWeightId:m,isDeleteWeightConfirmOpen:j,weightToDelete:z,weightDateInputRef:S,weightChartData:$,weightStats:w,setIsWeightTrackerOpen:a,setNewWeight:u,setNewWeightDate:k,setIsDeleteWeightConfirmOpen:R,loadBodyWeights:Y,handleAddWeight:M,handleDeleteWeight:J,handleOpenDeleteWeightConfirm:h}}function De(){const[t,l]=s.useState(()=>{try{const o=localStorage.getItem("settings:timerStep");return o?Number(o):30}catch{return 30}}),[n,a]=s.useState(()=>String(t)),[r,c]=s.useState("idle"),d=s.useRef(null),[C,v]=s.useState(()=>{try{return localStorage.getItem("settings:theme")==="light"?"light":"dark"}catch{return"dark"}}),[u,f]=s.useState(!1);s.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]),s.useEffect(()=>{const o=document.documentElement,m=document.querySelector('meta[name="theme-color"]');C==="light"?(o.classList.add("light-theme"),m&&m.setAttribute("content","#f5f5f7")):(o.classList.remove("light-theme"),m&&m.setAttribute("content","#0a0a0b"))},[C]);const k=s.useCallback(()=>{const o=C==="dark"?"light":"dark";v(o);try{localStorage.setItem("settings:theme",o)}catch{}},[C]),W=s.useCallback(()=>{d.current&&clearTimeout(d.current);const o=parseInt(n,10);if(!isNaN(o)&&o>=1&&o<=300){c("saving"),l(o);try{localStorage.setItem("settings:timerStep",String(o))}catch{}d.current=setTimeout(()=>{c("success"),d.current=setTimeout(()=>{c("idle")},500)},350)}else a(String(t)),c("idle")},[n,t]);return{timerStep:t,timerStepInput:n,setTimerStepInput:a,saveStatus:r,saveTimerStep:W,theme:C,handleThemeToggle:k,isSettingsOpen:u,setIsSettingsOpen:f}}const Ce=["upper","lower","push","pull","legs","arms","shoulders","chest","back","core","cardio","full"];function ae(t){if(typeof t!="string")return null;const l=t.trim();return Ce.includes(l)?l:null}function We({userId:t,userEmail:l}){const n=re,[a,r]=s.useState(!1),[c,d]=s.useState(!1),[C,v]=s.useState(!1),[u,f]=s.useState(null),[k,W]=s.useState(null),[o,m]=s.useState([]),[p,j]=s.useState([]),[R,z]=s.useState("none"),[N,S]=s.useState(!1),[Y,M]=s.useState(null),[J,h]=s.useState("success"),$=s.useRef(null),w=s.useCallback(async x=>{if(!t)return;const O=Array.isArray(x.workouts)?x.workouts:[];if(O.length===0){h("error"),M("В файле нет тренировок для импорта."),S(!0);return}const{data:L,error:_}=await n.from("workouts").select("id, workout_date").eq("user_id",t);if(_)throw _;const G=new Set;O.forEach(i=>{const E=typeof i.date=="string"&&i.date?i.date:typeof i.workout_date=="string"&&i.workout_date?i.workout_date:"";E&&G.add(E)});const y=(L||[]).filter(i=>G.has(i.workout_date)).map(i=>i.id);if(y.length>0){const{data:i,error:E}=await n.from("workout_exercises").select("id, workout_id").in("workout_id",y);if(E)throw E;const P=(i||[]).map(D=>D.id);if(P.length>0){const{error:D}=await n.from("workout_sets").delete().in("workout_exercise_id",P);if(D)throw D}if(y.length>0){const{error:D}=await n.from("workout_exercises").delete().in("workout_id",y);if(D)throw D;const{error:A}=await n.from("workouts").delete().in("id",y);if(A)throw A}}for(const i of O){const E=typeof i.name=="string"&&i.name.trim().length>0?i.name.trim():"Импортированная тренировка",P=typeof i.date=="string"&&i.date?i.date:new Date().toISOString().slice(0,10),{data:D,error:A}=await n.from("workouts").insert({user_id:t,name:E,icon:ae(i.icon),workout_date:P,is_cardio:!!i.isCardio,template_id:null}).select().single();if(A||!D)throw A||new Error("Не удалось создать тренировку при импорте.");const Q=Array.isArray(i.exercises)?i.exercises:[];if(Q.length===0)continue;const oe=Q.map((I,V)=>({workout_id:D.id,name:typeof I.name=="string"?I.name:"",position:typeof I.position=="number"?I.position:V+1,reps:typeof I.reps=="string"?I.reps:"",rest_seconds:typeof I.restSeconds=="number"?I.restSeconds:typeof I.rest_seconds=="number"?I.rest_seconds:150,sets:typeof I.setsPlanned=="number"?I.setsPlanned:Array.isArray(I.sets)?I.sets.length:1})),{data:T,error:K}=await n.from("workout_exercises").insert(oe).select();if(K||!T)throw K||new Error("Не удалось создать упражнения при импорте.");const se=[],de=[...Q].sort((I,V)=>{const te=typeof I.position=="number"?I.position:0,ne=typeof V.position=="number"?V.position:0;return te-ne}),ue=[...T].sort((I,V)=>{const te=typeof I.position=="number"?I.position:0,ne=typeof V.position=="number"?V.position:0;return te-ne});if(de.forEach((I,V)=>{const te=ue[V];if(!te)return;(Array.isArray(I.sets)?I.sets:[]).forEach(Z=>{se.push({workout_exercise_id:te.id,set_index:typeof Z.index=="number"?Z.index:1,weight:typeof Z.weight=="number"?Z.weight:null,reps:Z.reps==null?null:String(Z.reps),is_done:!!Z.isDone,updated_at:typeof Z.updatedAt=="string"&&Z.updatedAt?Z.updatedAt:new Date().toISOString()})})}),se.length>0){const{error:I}=await n.from("workout_sets").insert(se);if(I)throw I}}},[t,n]),g=s.useCallback(async()=>{if(t){r(!0);try{const{data:x,error:O}=await n.from("workouts").select(`
          id,
          name,
          icon,
          workout_date,
          is_cardio,
          template_id,
          workout_exercises (
            id,
            name,
            position,
            reps,
            rest_seconds,
            sets,
            workout_sets (
              id,
              set_index,
              weight,
              reps,
              is_done,
              updated_at
            )
          )
        `).eq("user_id",t).order("workout_date",{ascending:!1});if(O){console.error("Error exporting workouts:",O),alert("Не удалось загрузить данные тренировок для экспорта.");return}const L=(x||[]).map(P=>({id:P.id,name:P.name,icon:ae(P.icon),date:P.workout_date,isCardio:!!P.is_cardio,templateId:P.template_id,exercises:(P.workout_exercises||[]).map(D=>({id:D.id,name:D.name,position:D.position,reps:D.reps,restSeconds:D.rest_seconds,setsPlanned:D.sets,sets:(D.workout_sets||[]).map(A=>({id:A.id,index:A.set_index,weight:A.weight,reps:A.reps,isDone:A.is_done,updatedAt:A.updated_at}))}))})),_={exportedAt:new Date().toISOString(),user:{id:t,email:l},workouts:L},G=JSON.stringify(_,null,2),ee=new Blob([G],{type:"application/json;charset=utf-8;"}),y=URL.createObjectURL(ee),i=document.createElement("a"),E=new Date().toISOString().slice(0,10);i.href=y,i.download=`gymlog-workouts-${E}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(y)}catch(x){console.error("Unexpected error while exporting workouts:",x),alert("Произошла непредвиденная ошибка при экспорте данных.")}finally{r(!1)}}},[t,l,n]),b=s.useCallback(()=>{!t||c||$.current&&($.current.value="",$.current.click())},[t,c]),F=s.useCallback(async x=>{const O=x.target.files&&x.target.files[0];if(O)try{m([]),j([]);const L=await O.text();let _;try{_=JSON.parse(L)}catch{h("error"),M("Файл не является корректным JSON."),S(!0);return}if(!_||!Array.isArray(_.workouts)){h("error"),M("Файл не похож на экспорт тренировок из GymLog."),S(!0);return}if(!t)return;const G=Array.isArray(_.workouts)?_.workouts:[],ee=new Set;G.forEach(T=>{const K=typeof T.date=="string"&&T.date?T.date:typeof T.workout_date=="string"&&T.workout_date?T.workout_date:"";K&&ee.add(K)});const{data:y,error:i}=await n.from("workouts").select("workout_date").eq("user_id",t);if(i){console.error("Error checking existing workouts before import:",i),h("error"),M("Не удалось проверить существующие тренировки перед импортом."),S(!0);return}const E=new Set((y||[]).map(T=>T.workout_date)),P=E.size>0,D=new Map;G.forEach(T=>{const K=typeof T.date=="string"&&T.date?T.date:typeof T.workout_date=="string"&&T.workout_date?T.workout_date:"";K&&D.set(K,(D.get(K)||0)+1)});const A=[],Q=[];ee.forEach(T=>{E.has(T)?A.push(T):Q.push(T)});const oe=A.length>0;if(!P||!oe){h("success"),d(!0);try{await w(_),M("Импорт тренировок завершён. Откройте календарь, чтобы посмотреть тренировки."),S(!0)}catch(T){console.error("Error importing workouts:",T),alert("Не удалось импортировать тренировки: "+((T==null?void 0:T.message)||String(T)))}finally{d(!1)}return}if(Q.length===0){h("error"),M("Все тренировки из файла уже есть в вашем календаре. Новых тренировок нет."),S(!0);return}if(f(_),W(O.name),Q.length>0){const T=Q.map(K=>({date:K,count:D.get(K)||0})).sort((K,se)=>se.date.localeCompare(K.date));m(Q),j(T)}else m([]),j([]);v(!0)}catch(L){console.error("Error reading workouts import file:",L),alert("Не удалось прочитать файл тренировок.")}finally{x.target.value=""}},[t,n,w]),B=s.useCallback(async()=>{if(u){z("import"),d(!0);try{await w(u),f(null),W(null),m([]),j([]),v(!1),h("success"),M("Импорт тренировок завершён. Откройте календарь, чтобы посмотреть тренировки."),S(!0)}catch(x){console.error("Error importing workouts:",x),alert("Не удалось импортировать тренировки: "+((x==null?void 0:x.message)||String(x)))}finally{d(!1),z("none")}}},[u,w]),H=s.useCallback(async()=>{if(!u)return;const x=Array.isArray(u.workouts)?u.workouts:[];if(x.length===0){h("error"),M("В файле нет тренировок для импорта."),S(!0);return}const O=new Set(o);if(O.size===0){h("error"),M("В файле нет новых тренировок с датами, которых ещё нет в вашем календаре."),S(!0);return}const L=x.filter(_=>{const G=typeof _.date=="string"&&_.date?_.date:typeof _.workout_date=="string"&&_.workout_date?_.workout_date:"";return!!G&&O.has(G)});if(L.length===0){h("error"),M("Не удалось определить новые тренировки для импорта. Проверьте файл."),S(!0);return}z("onlyNew"),d(!0);try{await w({workouts:L}),f(null),W(null),m([]),j([]),v(!1),h("success"),M("Импорт новых тренировок завершён. Откройте календарь, чтобы посмотреть тренировки."),S(!0)}catch(_){console.error("Error importing only new workouts:",_),h("error"),M("Не удалось импортировать новые тренировки. Попробуйте ещё раз."),S(!0)}finally{d(!1),z("none")}},[u,o,w]),U=s.useCallback(async()=>{if(u){z("exportThenImport"),d(!0);try{await g(),await w(u),f(null),W(null),v(!1),h("success"),M("Текущие тренировки сохранены, импорт завершён. Откройте календарь, чтобы посмотреть тренировки."),S(!0)}catch(x){console.error("Error exporting and importing workouts:",x),h("error"),M("Не удалось выполнить экспорт и импорт тренировок. Попробуйте ещё раз."),S(!0)}finally{d(!1),z("none")}}},[u,g,w]),q=s.useCallback(()=>{v(!1),f(null),W(null),m([]),j([])},[]),X=s.useCallback(()=>{S(!1),M(null)},[]);return{isExporting:a,isImportingWorkouts:c,isWorkoutsImportDialogOpen:C,pendingWorkoutsImport:u,pendingWorkoutsFileName:k,pendingWorkoutsNewDates:o,pendingWorkoutsNewDatesSummary:p,importAction:R,isImportSuccessOpen:N,importSuccessMessage:Y,toastVariant:J,workoutsFileInputRef:$,handleExportWorkouts:g,handleStartImportWorkouts:b,handleWorkoutsFileChange:F,handleConfirmImportWorkoutsOnly:B,handleImportOnlyNewWorkouts:H,handleExportThenImportWorkouts:U,closeWorkoutsImportDialog:q,closeImportSuccessToast:X,setIsImportSuccessOpen:S,setImportSuccessMessage:M,setToastVariant:h}}const Se=["upper","lower","push","pull","legs","arms","shoulders","chest","back","core","cardio","full"];function le(t){if(typeof t!="string")return null;const l=t.trim();return Se.includes(l)?l:null}function _e({userId:t,userEmail:l,setToastVariant:n,setImportSuccessMessage:a,setIsImportSuccessOpen:r}){const c=re,[d,C]=s.useState(!1),[v,u]=s.useState(!1),[f,k]=s.useState(!1),[W,o]=s.useState([]),[m,p]=s.useState([]),[j,R]=s.useState("none"),z=s.useRef(null),N=s.useCallback(async w=>{if(!t)return;const g=Array.isArray(w.templates)?w.templates:[];if(g.length===0){n("error"),a("В файле нет шаблонов для импорта."),r(!0);return}for(const b of g){const F=typeof b.name=="string"&&b.name.trim().length>0?b.name.trim():"Импортированный шаблон",{data:B,error:H}=await c.from("workout_templates").insert({user_id:t,name:F,icon:le(b.icon)}).select().single();if(H||!B)throw H||new Error("Не удалось создать шаблон при импорте.");const U=Array.isArray(b.exercises)?b.exercises:[];if(U.length===0)continue;const q=U.map((x,O)=>({template_id:B.id,name:typeof x.name=="string"?x.name:"",sets:typeof x.sets=="number"?x.sets:1,reps:typeof x.reps=="string"?x.reps:"",rest_seconds:typeof x.restSeconds=="number"?x.restSeconds:typeof x.rest_seconds=="number"?x.rest_seconds:150,position:typeof x.position=="number"?x.position:O+1})),{error:X}=await c.from("template_exercises").insert(q);if(X)throw X}},[t,c,n,a,r]),S=s.useCallback(async()=>{if(t){C(!0);try{const{data:w,error:g}=await c.from("workout_templates").select(`
          id,
          name,
          icon,
          created_at,
          template_exercises (
            id,
            name,
            sets,
            reps,
            rest_seconds,
            position
          )
        `).eq("user_id",t).order("created_at",{ascending:!1});if(g){console.error("Error exporting templates:",g),alert("Не удалось загрузить шаблоны для экспорта.");return}const b=(w||[]).map(x=>({id:x.id,name:x.name,icon:le(x.icon),createdAt:x.created_at,exercises:(x.template_exercises||[]).map(O=>({id:O.id,name:O.name,sets:O.sets,reps:O.reps,restSeconds:O.rest_seconds,position:O.position}))})),F={exportedAt:new Date().toISOString(),user:{id:t,email:l},templates:b},B=JSON.stringify(F,null,2),H=new Blob([B],{type:"application/json;charset=utf-8;"}),U=URL.createObjectURL(H),q=document.createElement("a"),X=new Date().toISOString().slice(0,10);q.href=U,q.download=`gymlog-templates-${X}.json`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(U)}catch(w){console.error("Unexpected error while exporting templates:",w),alert("Произошла непредвиденная ошибка при экспорте шаблонов.")}finally{C(!1)}}},[t,l,c]),Y=s.useCallback(()=>{!t||v||z.current&&(z.current.value="",z.current.click())},[t,v]),M=s.useCallback(async w=>{const g=w.target.files&&w.target.files[0];if(g)try{const b=await g.text();let F;try{F=JSON.parse(b)}catch{n("error"),a("Файл не является корректным JSON."),r(!0);return}if(!F||!Array.isArray(F.templates)){n("error"),a("Файл не похож на экспорт шаблонов из GymLog."),r(!0);return}if(!t)return;const B=Array.isArray(F.templates)?F.templates:[];if(B.length===0){n("error"),a("В файле нет шаблонов для импорта."),r(!0);return}const{data:H,error:U}=await c.from("workout_templates").select("id, name").eq("user_id",t);if(U){console.error("Error checking existing templates before import:",U),n("error"),a("Не удалось проверить существующие шаблоны перед импортом."),r(!0);return}const q=L=>typeof L=="string"?L.trim().toLowerCase():"",X=new Map;(H||[]).forEach(L=>{const _=q(L.name);_&&(X.has(_)||X.set(_,{id:L.id,name:L.name||""}))});const x=[],O=[];if(B.forEach(L=>{const _=q(L==null?void 0:L.name);if(!_||!X.has(_))x.push(L);else{const G=X.get(_);O.push({existingId:G.id,existingName:G.name||"",template:L})}}),x.length===0&&O.length>0){n("error"),a("Все шаблоны из файла уже есть в вашем аккаунте. Новых шаблонов нет."),r(!0);return}if(O.length===0){u(!0);try{await N({templates:B}),n("success"),a("Импорт шаблонов завершён. Откройте страницу «Шаблоны», чтобы посмотреть их."),r(!0)}catch(L){console.error("Error importing templates:",L),n("error"),a("Не удалось импортировать шаблоны. Попробуйте ещё раз."),r(!0)}finally{u(!1)}return}o(x),p(O),k(!0)}catch(b){console.error("Error importing templates:",b),n("error"),a("Не удалось импортировать шаблоны. Попробуйте ещё раз."),r(!0)}finally{u(!1),w.target.value=""}},[t,c,N,n,a,r]),J=s.useCallback(async()=>{if(W.length===0){k(!1),p([]),o([]),n("error"),a("Все шаблоны из файла уже есть в вашем аккаунте. Новых шаблонов нет."),r(!0);return}R("onlyNew"),u(!0);try{await N({templates:W}),o([]),p([]),k(!1),n("success"),a("Импорт новых шаблонов завершён. Откройте страницу «Шаблоны», чтобы посмотреть их."),r(!0)}catch(w){console.error("Error importing only new templates:",w),n("error"),a("Не удалось импортировать новые шаблоны. Попробуйте ещё раз."),r(!0)}finally{u(!1),R("none")}},[W,N,n,a,r]),h=s.useCallback(async()=>{if(m.length===0&&W.length===0){k(!1);return}R("overwrite"),u(!0);try{const w=Array.from(new Set(m.map(b=>b.existingId)));if(w.length>0){const{error:b}=await c.from("template_exercises").delete().in("template_id",w);if(b)throw b;const{error:F}=await c.from("workout_templates").delete().in("id",w);if(F)throw F}const g=[...W,...m.map(b=>b.template)];await N({templates:g}),o([]),p([]),k(!1),n("success"),a("Шаблоны успешно импортированы. Совпадающие шаблоны были перезаписаны."),r(!0)}catch(w){console.error("Error overwriting templates:",w),alert("Не удалось импортировать шаблоны с перезаписью: "+((w==null?void 0:w.message)||String(w)))}finally{u(!1),R("none")}},[m,W,c,N,n,a,r]),$=s.useCallback(()=>{k(!1),o([]),p([])},[]);return{isExportingTemplates:d,handleExportTemplates:S,isImportingTemplates:v,isTemplatesImportDialogOpen:f,pendingTemplatesNew:W,pendingTemplatesDuplicates:m,templatesImportAction:j,templatesFileInputRef:z,handleStartImportTemplates:Y,handleTemplatesFileChange:M,handleImportTemplatesOnlyNew:J,handleImportTemplatesOverwrite:h,closeTemplatesImportDialog:$}}function Ee({userId:t,setToastVariant:l,setImportSuccessMessage:n,setIsImportSuccessOpen:a}){const r=re,[c,d]=s.useState(!1),[C,v]=s.useState(!1),[u,f]=s.useState(!1),[k,W]=s.useState([]),[o,m]=s.useState([]),[p,j]=s.useState(!1),[R,z]=s.useState(!1),[N,S]=s.useState(!1),[Y,M]=s.useState([]),[J,h]=s.useState([]),[$,w]=s.useState(!1),g=k.length>0&&o.length===k.length,b=Y.length>0&&J.length===Y.length,F=s.useCallback(async()=>{if(!(!t||u)){f(!0),m([]);try{const{data:y,error:i}=await r.from("workouts").select("id, workout_date").eq("user_id",t).order("workout_date",{ascending:!1});if(i){console.error("Error loading workouts for deletion:",i),alert("Не удалось загрузить список тренировок для удаления.");return}const E=new Map;(y||[]).forEach(D=>{const A=D.workout_date,Q=D.id;!A||!Q||(E.has(A)||E.set(A,[]),E.get(A).push(Q))});const P=Array.from(E.entries()).map(([D,A])=>({date:D,workoutIds:A,count:A.length})).sort((D,A)=>A.date.localeCompare(D.date));if(P.length===0){l("error"),n("У вас нет тренировок для удаления."),a(!0);return}W(P),d(!1),v(!0)}catch(y){console.error("Unexpected error while loading workouts for deletion:",y),alert("Произошла ошибка при загрузке тренировок для удаления.")}finally{f(!1)}}},[t,u,r,l,n,a]),B=s.useCallback(async()=>{if(!(!t||N)){S(!0),h([]);try{const{data:y,error:i}=await r.from("workout_templates").select("id, name").eq("user_id",t).order("created_at",{ascending:!1});if(i){console.error("Error loading templates for deletion:",i),alert("Не удалось загрузить список шаблонов для удаления.");return}const E=(y||[]).map(P=>({id:P.id,name:P.name||"Без названия"}));if(E.length===0){l("error"),n("У вас нет шаблонов для удаления."),a(!0);return}M(E),d(!1),z(!0)}catch(y){console.error("Unexpected error while loading templates for deletion:",y),alert("Произошла ошибка при загрузке шаблонов для удаления.")}finally{S(!1)}}},[t,N,r,l,n,a]),H=s.useCallback(y=>{m(i=>i.includes(y)?i.filter(E=>E!==y):[...i,y])},[]),U=s.useCallback(()=>{if(k.length===0)return;const y=o.length===k.length;m(y?[]:k.map(i=>i.date))},[k,o.length]),q=s.useCallback(()=>{m([])},[]),X=s.useCallback(y=>{h(i=>i.includes(y)?i.filter(E=>E!==y):[...i,y])},[]),x=s.useCallback(()=>{if(Y.length===0)return;const y=J.length===Y.length;h(y?[]:Y.map(i=>i.id))},[Y,J.length]),O=s.useCallback(()=>{h([])},[]),L=s.useCallback(async()=>{if(!t||o.length===0)return;const y=k.filter(i=>o.includes(i.date)).flatMap(i=>i.workoutIds);if(y.length!==0){j(!0);try{const{data:i,error:E}=await r.from("workout_exercises").select("id, workout_id").in("workout_id",y);if(E)throw E;const P=(i||[]).map(D=>D.id);if(P.length>0){const{error:D}=await r.from("workout_sets").delete().in("workout_exercise_id",P);if(D)throw D}if(y.length>0){const{error:D}=await r.from("workout_exercises").delete().in("workout_id",y);if(D)throw D;const{error:A}=await r.from("workouts").delete().in("id",y);if(A)throw A}v(!1),W([]),m([]),l("success"),n("Выбранные тренировки успешно удалены."),a(!0)}catch(i){console.error("Error deleting workouts:",i),l("error"),n("Не удалось удалить выбранные тренировки."),a(!0)}finally{j(!1)}}},[t,o,k,r,l,n,a]),_=s.useCallback(async()=>{if(t&&J.length!==0){w(!0);try{const y=J;if(y.length>0){const{error:i}=await r.from("template_exercises").delete().in("template_id",y);if(i)throw i;const{error:E}=await r.from("workout_templates").delete().in("id",y);if(E)throw E}z(!1),M([]),h([]),l("success"),n("Выбранные шаблоны тренировок успешно удалены."),a(!0)}catch(y){console.error("Error deleting templates:",y),l("error"),n("Не удалось удалить выбранные шаблоны тренировок."),a(!0)}finally{w(!1)}}},[t,J,r,l,n,a]),G=s.useCallback(()=>{p||v(!1)},[p]),ee=s.useCallback(()=>{$||z(!1)},[$]);return{isCleanDataDialogOpen:c,setIsCleanDataDialogOpen:d,isDeleteWorkoutsDialogOpen:C,isLoadingWorkoutsForDeletion:u,workoutDateGroups:k,selectedWorkoutDates:o,isDeletingWorkouts:p,areAllWorkoutDatesSelected:g,isDeleteTemplatesDialogOpen:R,isLoadingTemplatesForDeletion:N,templatesForDeletion:Y,selectedTemplateIds:J,isDeletingTemplates:$,areAllTemplatesSelected:b,openDeleteWorkoutsDialog:F,toggleWorkoutDateSelection:H,selectAllWorkoutDates:U,clearWorkoutSelection:q,handleDeleteSelectedWorkouts:L,closeDeleteWorkoutsDialog:G,openDeleteTemplatesDialog:B,toggleTemplateSelection:X,selectAllTemplates:x,clearTemplateSelection:O,handleDeleteSelectedTemplates:_,closeDeleteTemplatesDialog:ee}}function ie(t){if(!t||typeof t!="string")return t;const l=t.split("-");if(l.length===3){const[n,a,r]=l;if(n&&a&&r)return`${r}.${a}.${n}`}return t}function Te({isOpen:t,onClose:l,bodyWeights:n,loadingWeights:a,weightChartData:r,weightStats:c,newWeight:d,newWeightDate:C,savingWeight:v,deletingWeightId:u,weightDateInputRef:f,isDeleteWeightConfirmOpen:k,weightToDelete:W,setNewWeight:o,setNewWeightDate:m,setIsDeleteWeightConfirmOpen:p,handleAddWeight:j,handleDeleteWeight:R,handleOpenDeleteWeightConfirm:z}){return t?pe.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:l}),e.jsxs("div",{className:"relative w-full max-w-lg mx-4 glass card-dark rounded-xl shadow-xl p-5 space-y-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Трекер веса тела"}),e.jsx("button",{type:"button",onClick:l,className:"p-1 text-gray-400 hover:text-white transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-3 p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("p",{className:"text-sm text-gray-300 font-medium",children:"Добавить запись"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-[100px]",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Вес (кг)"}),e.jsx("input",{type:"text",inputMode:"decimal",value:d,onChange:N=>{const S=N.target.value.replace(".",",");/^[0-9]*[,]?[0-9]*$/.test(S)&&o(S)},placeholder:"70,5",className:"w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex-1 min-w-[130px]",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Дата"}),e.jsxs("div",{className:"relative w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-left",children:[e.jsx("span",{className:"block text-sm pointer-events-none truncate pr-7",children:ie(C)}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-md bg-white/5 hover:bg-white/20 text-gray-300 hover:text-white transition-colors border border-white/10 cursor-pointer",onClick:N=>{var S;N.stopPropagation(),(S=f.current)==null||S.showPicker()},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("input",{ref:f,type:"date",value:C,onChange:N=>m(N.target.value),max:new Date().toISOString().slice(0,10),className:"absolute bottom-0 left-0 w-0 h-0 opacity-0 pointer-events-none",tabIndex:-1})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",onClick:j,disabled:!d||v,className:"btn-glass btn-glass-sm btn-glass-primary disabled:opacity-50",children:v?"...":"Добавить"})})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-white/5 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Текущий"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[c.current.toFixed(1).replace(".",",")," кг"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-white/5 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Мин"}),e.jsxs("p",{className:"text-lg font-bold text-green-400",children:[c.min.toFixed(1).replace(".",",")," кг"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-white/5 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Макс"}),e.jsxs("p",{className:"text-lg font-bold text-orange-400",children:[c.max.toFixed(1).replace(".",",")," кг"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-white/5 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Изменение"}),e.jsxs("p",{className:`text-lg font-bold ${c.change>0?"text-red-400":c.change<0?"text-green-400":"text-gray-400"}`,children:[c.change>0?"+":"",c.change.toFixed(1).replace(".",",")," кг"]})]})]}),r.length>1&&e.jsx("div",{className:"h-48 w-full",children:e.jsx(xe,{width:"100%",height:"100%",children:e.jsxs(fe,{data:r,margin:{top:5,right:5,left:-20,bottom:5},children:[e.jsx(we,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(be,{dataKey:"date",tick:{fill:"#9ca3af",fontSize:10},axisLine:{stroke:"rgba(255,255,255,0.2)"},tickLine:!1}),e.jsx(ye,{domain:["dataMin - 2","dataMax + 2"],tick:{fill:"#9ca3af",fontSize:10},axisLine:{stroke:"rgba(255,255,255,0.2)"},tickLine:!1,tickFormatter:N=>`${N}`}),e.jsx(ke,{contentStyle:{background:"rgba(24,24,27,0.95)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff"},formatter:N=>[`${N.toFixed(1).replace(".",",")} кг`,"Вес"]}),e.jsx(je,{type:"monotone",dataKey:"weight",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:0,r:3},activeDot:{r:5,fill:"#60a5fa"}})]})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-300 font-medium",children:["История (",n.length,")"]}),a?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"})}):n.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Пока нет записей. Добавьте свой первый вес выше."}):e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:n.slice(0,20).map(N=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-white font-medium",children:[Number(N.weight).toFixed(1).replace(".",",")," кг"]}),e.jsx("span",{className:"text-sm text-gray-400",children:ie(new Date(N.recorded_at).toISOString().slice(0,10))})]}),e.jsx("button",{type:"button",onClick:()=>z(N.id),disabled:u===N.id,className:"p-1 text-gray-500 hover:text-red-400 transition-colors disabled:opacity-50",children:u===N.id?e.jsx("span",{className:"w-4 h-4 border border-white/30 border-t-white rounded-full animate-spin inline-block"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},N.id))})]})]}),e.jsx(ce,{open:k,onOpenChange:p,title:"Удалить запись о весе?",description:"Это действие необратимо.",confirmText:"Удалить",cancelText:"Отмена",variant:"danger",onConfirm:()=>{W&&R(W)}})]}),document.body):null}function Oe({isOpen:t,onClose:l,isLoadingWorkoutsForDeletion:n,isLoadingTemplatesForDeletion:a,openDeleteWorkoutsDialog:r,openDeleteTemplatesDialog:c}){if(!t)return null;const d=n||a;return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{d||l()}}),e.jsxs("div",{className:"relative w-full max-w-md glass card-dark rounded-xl shadow-xl p-5 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Очистить данные"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Выберите, какие данные вы хотите удалить."}),d&&e.jsx("p",{className:"text-xs text-gray-400",children:"Загружаем данные..."}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:r,disabled:d,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary disabled:opacity-50",children:"Удалить тренировки"}),e.jsx("button",{type:"button",onClick:c,disabled:d,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary disabled:opacity-50",children:"Удалить шаблоны тренировок"}),e.jsx("button",{type:"button",onClick:()=>{d||l()},className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary bg-white/10 hover:bg-white/5",children:"Отмена"})]})]})]})}function Ae({isOpen:t,onClose:l,workoutDateGroups:n,selectedWorkoutDates:a,isDeletingWorkouts:r,areAllWorkoutDatesSelected:c,toggleWorkoutDateSelection:d,selectAllWorkoutDates:C,clearWorkoutSelection:v,handleDeleteSelectedWorkouts:u}){return t?e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{r||l()}}),e.jsxs("div",{className:"relative w-full max-w-md glass card-dark rounded-xl shadow-xl p-5 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Удалить тренировки"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Выберите даты тренировок, которые хотите удалить. Это действие необратимо."}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-300",children:[e.jsxs("button",{type:"button",onClick:C,disabled:n.length===0||r,className:"inline-flex items-center gap-2 disabled:opacity-40",children:[e.jsx("div",{className:`w-4 h-4 rounded-md border flex items-center justify-center ${c?"bg-green-500 border-green-400":"border-white/40"}`,children:c&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3.25-3.25a1 1 0 111.414-1.414L8.5 11.836l6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{children:"Выбрать все"})]}),e.jsx("button",{type:"button",onClick:v,disabled:a.length===0||r,className:"text-xs text-gray-400 hover:text-gray-200 disabled:opacity-40",children:"Отменить выбранное"})]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto rounded-md bg-black/20 p-3 space-y-2",children:[n.map(f=>{const k=a.includes(f.date);return e.jsxs("button",{type:"button",onClick:()=>d(f.date),className:`w-full flex items-center justify-between px-3 py-2 rounded-md border text-left transition-colors ${k?"bg-white/10 border-green-400":"bg-transparent border-white/10 hover:bg-white/5"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:f.date}),e.jsx("div",{className:"text-xs text-gray-400",children:f.count===1?"1 тренировка":`${f.count} тренировок`})]}),e.jsx("div",{className:`w-5 h-5 rounded-md border flex items-center justify-center ${k?"bg-green-500 border-green-400":"border-white/40"}`,children:k&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3.25-3.25a1 1 0 111.414-1.414L8.5 11.836l6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},f.date)}),n.length===0&&e.jsx("p",{className:"text-sm text-gray-400",children:"Тренировки для удаления не найдены."})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:u,disabled:a.length===0||r,className:"btn-glass btn-glass-full btn-glass-md btn-glass-primary disabled:opacity-50",children:r?"Удаляем выбранные...":"Удалить выбранные"}),e.jsx("button",{type:"button",onClick:()=>{r||l()},className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Отмена"})]})]})]}):null}function Le({isOpen:t,onClose:l,templatesForDeletion:n,selectedTemplateIds:a,isDeletingTemplates:r,areAllTemplatesSelected:c,toggleTemplateSelection:d,selectAllTemplates:C,clearTemplateSelection:v,handleDeleteSelectedTemplates:u}){return t?e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{r||l()}}),e.jsxs("div",{className:"relative w-full max-w-md glass card-dark rounded-xl shadow-xl p-5 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Удалить шаблоны тренировок"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Выберите шаблоны тренировок, которые хотите удалить. Это действие необратимо."}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-300",children:[e.jsxs("button",{type:"button",onClick:C,disabled:n.length===0||r,className:"inline-flex items-center gap-2 disabled:opacity-40",children:[e.jsx("div",{className:`w-4 h-4 rounded-md border flex items-center justify-center ${c?"bg-green-500 border-green-400":"border-white/40"}`,children:c&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3.25-3.25a1 1 0 111.414-1.414L8.5 11.836l6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{children:"Выбрать все"})]}),e.jsx("button",{type:"button",onClick:v,disabled:a.length===0||r,className:"text-xs text-gray-400 hover:text-gray-200 disabled:opacity-40",children:"Отменить выбранное"})]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto rounded-md bg-black/20 p-3 space-y-2",children:[n.map(f=>{const k=a.includes(f.id);return e.jsxs("button",{type:"button",onClick:()=>d(f.id),className:`w-full flex items-center justify-between px-3 py-2 rounded-md border text-left transition-colors ${k?"bg-white/10 border-green-400":"bg-transparent border-white/10 hover:bg-white/5"}`,children:[e.jsx("div",{className:"text-sm font-medium text-white",children:f.name}),e.jsx("div",{className:`w-5 h-5 rounded-md border flex items-center justify-center ${k?"bg-green-500 border-green-400":"border-white/40"}`,children:k&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3.25-3.25a1 1 0 111.414-1.414L8.5 11.836l6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},f.id)}),n.length===0&&e.jsx("p",{className:"text-sm text-gray-400",children:"Шаблоны для удаления не найдены."})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:u,disabled:a.length===0||r,className:"btn-glass btn-glass-full btn-glass-md btn-glass-primary disabled:opacity-50",children:r?"Удаляем выбранные...":"Удалить выбранные"}),e.jsx("button",{type:"button",onClick:()=>{r||l()},className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Отмена"})]})]})]}):null}function Ie({isImportingWorkouts:t,isImportingTemplates:l,handleStartImportWorkouts:n,handleStartImportTemplates:a,isExporting:r,isExportingTemplates:c,handleExportWorkouts:d,handleExportTemplates:C,isDeleting:v,startCleanDataFlow:u,startDeleteAccountFlow:f}){const[k,W]=s.useState(!1),o=s.useRef(null);return s.useEffect(()=>{const m=p=>{o.current&&!o.current.contains(p.target)&&W(!1)};if(k)return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[k]),e.jsxs("div",{className:"relative",ref:o,children:[e.jsx("button",{onClick:()=>W(!k),className:"p-2 text-white hover:text-gray-300 transition-colors","aria-label":"Меню",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 8c1.1 0 2-1 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 1-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 1-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),k&&e.jsxs("div",{className:"absolute right-0 mt-2 menu-popover space-y-0.5",children:[e.jsx("div",{className:"px-4 pt-2 pb-0 text-[11px] font-semibold uppercase tracking-wide text-gray-400 text-center whitespace-nowrap",children:"Импорт"}),e.jsx("button",{onClick:()=>{W(!1),n()},disabled:t,className:"w-full text-left px-4 py-1.5 text-sm text-white hover:bg-white/5 disabled:opacity-50 transition-colors rounded-lg",children:t?"Импорт тренировок...":"Тренировки"}),e.jsx("button",{onClick:()=>{W(!1),a()},disabled:l,className:"w-full text-left px-4 py-1.5 text-sm text-white hover:bg-white/5 disabled:opacity-50 transition-colors rounded-lg",children:l?"Импорт шаблонов...":"Шаблоны"}),e.jsx("div",{className:"px-4 pt-1 pb-0 text-[11px] font-semibold uppercase tracking-wide text-gray-400 text-center whitespace-nowrap",children:"Экспорт"}),e.jsx("button",{onClick:async()=>{W(!1),await d()},disabled:r,className:"w-full text-left px-4 py-1.5 text-sm text-white hover:bg-white/5 disabled:opacity-50 transition-colors rounded-lg",children:r?"Экспорт тренировок...":"Тренировки"}),e.jsx("button",{onClick:async()=>{W(!1),await C()},disabled:c,className:"w-full text-left px-4 py-1.5 text-sm text-white hover:bg-white/5 disabled:opacity-50 transition-colors rounded-lg",children:c?"Экспорт шаблонов...":"Шаблоны"}),e.jsx("div",{className:"px-4 pt-1 pb-0 text-[11px] font-semibold uppercase tracking-wide text-gray-400 text-center whitespace-nowrap",children:"Данные и аккаунт"}),e.jsx("button",{onClick:()=>{W(!1),u()},className:"w-full text-left px-4 py-1.5 text-sm text-white hover:bg-white/5 transition-colors rounded-lg",children:"Очистить данные"}),e.jsx("button",{onClick:()=>{W(!1),f()},disabled:v,className:"w-full text-left px-4 py-1.5 text-sm text-red-400 hover:bg-red-500/10 disabled:opacity-50 transition-colors rounded-lg",children:v?"Удаление...":"Удалить аккаунт"})]})]})}function Re({isOpen:t,timerStepInput:l,setTimerStepInput:n,saveStatus:a,saveTimerStep:r,theme:c,handleThemeToggle:d}){return t?e.jsxs("div",{className:"glass card-dark rounded-lg p-4 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Настройки"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm text-gray-300",children:"Шаг таймера отдыха (секунды)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Значение, на которое изменяется таймер при нажатии +/-"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap",children:[e.jsx("input",{type:"number",min:"1",max:"300",value:l,onChange:C=>n(C.target.value),className:"w-24 px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("button",{type:"button",onClick:r,disabled:a==="saving",className:"btn-glass btn-glass-sm btn-glass-primary flex items-center justify-center gap-2 min-w-[120px]",children:[a==="saving"&&e.jsx("span",{"aria-label":"Сохранение...",className:"h-5 w-5 inline-block border-2 border-white/70 border-t-transparent rounded-full animate-spin"}),a==="success"&&e.jsx("svg",{"aria-label":"Сохранено",xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),a==="idle"&&"Сохранить"]})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-2",children:[e.jsx("label",{className:"block text-sm text-gray-300",children:"Тема оформления"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:d,className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all duration-200 ease-out ${c==="dark"?"btn-glass btn-glass-primary":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),"Тёмная"]})}),e.jsx("button",{type:"button",onClick:d,className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all duration-200 ease-out ${c==="light"?"btn-glass btn-glass-primary":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),"Светлая"]})})]})]})]}):null}function Me({isOpen:t,pendingTemplatesDuplicates:l,isImportingTemplates:n,templatesImportAction:a,onClose:r,handleImportTemplatesOnlyNew:c,handleImportTemplatesOverwrite:d}){return t?e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{n||r()}}),e.jsxs("div",{className:"relative w-full max-w-md glass card-dark rounded-xl shadow-xl p-5 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Импорт шаблонов"}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("p",{children:"В файле найдены шаблоны с именами, которые уже есть в вашем аккаунте."}),e.jsxs("ul",{className:"list-disc list-inside text-xs text-gray-400 space-y-0.5",children:[e.jsx("li",{children:"«Импортировать только новые шаблоны» — добавит только те, которых ещё нет."}),e.jsx("li",{children:"«Перезаписать существующие шаблоны» — удалит совпадающие и создаст их заново из файла."})]})]}),e.jsxs("div",{className:"max-h-48 overflow-y-auto rounded-md bg-black/20 p-3 space-y-2",children:[l.map((C,v)=>{var u;return e.jsxs("div",{className:"text-sm text-gray-200 border-b border-white/5 pb-1 last:border-0",children:[e.jsx("div",{className:"font-semibold",children:((u=C.template)==null?void 0:u.name)||"Без названия"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Уже есть как: «",C.existingName||"Без названия","»"]})]},C.existingId+"-"+v)}),l.length===0&&e.jsx("p",{className:"text-sm text-gray-400",children:"Совпадающих шаблонов не найдено."})]}),n?e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-300",children:a==="overwrite"?"Перезаписываем существующие шаблоны и импортируем данные...":"Импортируем только новые шаблоны..."})]}):e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Импортировать только новые шаблоны (без изменения существующих)"}),e.jsx("button",{type:"button",onClick:d,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Перезаписать существующие шаблоны и добавить новые"}),e.jsx("button",{type:"button",onClick:r,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Отмена"})]})]})]}):null}function Fe(t){if(!t||typeof t!="string")return t;const l=t.split("-");if(l.length===3){const[n,a,r]=l;if(n&&a&&r)return`${r}.${a}.${n}`}return t}function Pe({isOpen:t,pendingWorkoutsImport:l,pendingWorkoutsFileName:n,pendingWorkoutsNewDatesSummary:a,isImportingWorkouts:r,importAction:c,onClose:d,handleConfirmImportWorkoutsOnly:C,handleImportOnlyNewWorkouts:v,handleExportThenImportWorkouts:u}){return!t||!l?null:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{r||d()}}),e.jsxs("div",{className:"relative w-full max-w-md glass card-dark rounded-xl shadow-xl p-5 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Импорт тренировок"}),e.jsx("p",{className:"text-sm text-gray-300",children:`Будут импортированы тренировки из файла "${n||"выбранный файл"}".`}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsx("p",{children:"Тренировки на даты, которые уже есть в календаре и присутствуют в файле, будут удалены и перезаписаны данными из файла. На другие даты тренировки останутся без изменений."}),e.jsxs("ul",{className:"list-disc list-inside text-xs text-gray-500 space-y-0.5",children:[e.jsx("li",{children:"«Импортировать только новые тренировки» — добавит тренировки только на новые даты, без изменения существующих."}),e.jsx("li",{children:"«Импортировать с перезаписью дат» — заменит тренировки на совпадающие даты и добавит новые."}),e.jsx("li",{children:"«Экспортировать текущие тренировки и импортировать с перезаписью» — сначала сохранит текущие тренировки в файл, затем выполнит импорт с перезаписью дат."})]})]}),a.length>0&&e.jsxs("div",{className:"mt-2 rounded-md bg-black/20 p-3",children:[e.jsx("p",{className:"text-xs text-gray-300",children:"Новые тренировки из файла (даты, которых ещё нет в календаре):"}),e.jsx("div",{className:"mt-1 space-y-1 max-h-32 overflow-y-auto text-center",children:a.map(f=>e.jsx("div",{className:"text-xs text-gray-200",children:e.jsx("span",{children:Fe(f.date)})},f.date))})]}),r?e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-300",children:c==="exportThenImport"?"Экспортируем текущие тренировки и импортируем новые...":c==="onlyNew"?"Импортируем только новые тренировки...":"Импортируем тренировки..."})]}):e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[a.length>0&&e.jsx("button",{type:"button",onClick:v,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Импортировать только новые тренировки (без изменения существующих)"}),e.jsx("button",{type:"button",onClick:C,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Импортировать с перезаписью дат из файла"}),e.jsx("button",{type:"button",onClick:u,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary",children:"Экспортировать текущие тренировки и импортировать с перезаписью дат"}),e.jsx("button",{type:"button",onClick:d,className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary bg-white/10 hover:bg-white/5",children:"Отмена"})]})]})]})}const Ge=()=>{const{user:t,signOut:l}=me(),n=he(),[a,r]=s.useState(!1),[c,d]=s.useState(!1),[C,v]=s.useState(""),[u,f]=s.useState(null),[k,W]=s.useState(!1),o=We({userId:t==null?void 0:t.id,userEmail:t==null?void 0:t.email}),m=_e({userId:t==null?void 0:t.id,userEmail:t==null?void 0:t.email,setToastVariant:o.setToastVariant,setImportSuccessMessage:o.setImportSuccessMessage,setIsImportSuccessOpen:o.setIsImportSuccessOpen}),p=Ee({userId:t==null?void 0:t.id,setToastVariant:o.setToastVariant,setImportSuccessMessage:o.setImportSuccessMessage,setIsImportSuccessOpen:o.setIsImportSuccessOpen}),j=ve({userId:t==null?void 0:t.id}),R=De();s.useEffect(()=>{j.isWeightTrackerOpen&&t&&j.loadBodyWeights()},[j.isWeightTrackerOpen,t]);const z=s.useMemo(()=>{var w;if(!t)return"";const h=(w=t.user_metadata)==null?void 0:w.nickname;if(typeof h=="string"&&h.trim().length>0)return h.trim();const $=t.email||"";return $.endsWith("@gymlog.app")?$.replace(/@gymlog\.app$/,""):$},[t]),N=s.useMemo(()=>{const h=(t==null?void 0:t.email)||"";if(!h||typeof h!="string")return null;const[$,w]=h.split("@");if(!$||!w)return null;const g=Math.max(1,Math.ceil($.length/2)),b=$.slice(0,g),F=$.slice(g);return{email:h,localPart:$,domain:w,visiblePart:b,hiddenPart:F}},[t==null?void 0:t.email]),S=async()=>{try{await l(),n("/login",{replace:!0})}catch(h){console.error("Error logging out:",h)}},Y=()=>{!t||!t.email||(v(""),f(null),d(!0))},M=()=>{t&&p.setIsCleanDataDialogOpen(!0)},J=async()=>{if(!(!t||!t.email)){if(C.trim()!==t.email)throw f("Введённый e-mail не совпадает с вашим."),new Error("EMAIL_MISMATCH");f(null),r(!0);try{await Ne(),alert("Ваш аккаунт и все данные были успешно удалены."),await l(),n("/login",{replace:!0})}catch(h){console.error("Error deleting account:",h),alert(`Не удалось удалить аккаунт: ${h.message}`)}finally{r(!1)}}};return e.jsxs("div",{className:"p-4 space-y-4 max-w-lg mx-auto pt-safe relative profile-page",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Профиль"}),e.jsx(Ie,{isImportingWorkouts:o.isImportingWorkouts,isImportingTemplates:m.isImportingTemplates,handleStartImportWorkouts:o.handleStartImportWorkouts,handleStartImportTemplates:m.handleStartImportTemplates,isExporting:o.isExporting,isExportingTemplates:m.isExportingTemplates,handleExportWorkouts:o.handleExportWorkouts,handleExportTemplates:m.handleExportTemplates,isDeleting:a,startCleanDataFlow:M,startDeleteAccountFlow:Y})]}),e.jsx("div",{className:"p-4 glass card-dark rounded-lg shadow",children:t&&e.jsxs("p",{className:"flex flex-wrap items-center gap-1",children:[e.jsx("span",{children:"Вы вошли как:"}),N?e.jsxs("span",{className:"font-semibold",children:[N.visiblePart,N.hiddenPart&&e.jsx("button",{type:"button",onClick:()=>W(!0),className:"inline px-0 py-0 border-b border-dashed border-white/40 hover:border-white/80 transition-colors cursor-pointer select-none bg-transparent rounded-none align-baseline",children:k?e.jsx("span",{children:N.hiddenPart}):e.jsx("span",{children:"•".repeat(Math.max(3,N.hiddenPart.length))})}),"@",N.domain]}):e.jsx("span",{className:"font-semibold",children:z})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>n("/progress"),className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"Узнать прогресс"]}),e.jsxs("button",{onClick:()=>j.setIsWeightTrackerOpen(!0),className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),"Трекер веса тела"]}),e.jsxs("button",{onClick:()=>R.setIsSettingsOpen(!R.isSettingsOpen),className:"btn-glass btn-glass-full btn-glass-md btn-glass-secondary flex items-center justify-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Настройки",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 transition-transform ${R.isSettingsOpen?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),e.jsx("button",{onClick:S,className:"btn-glass btn-glass-logout btn-glass-full btn-glass-md",children:"Выйти"})]}),e.jsx(Re,{isOpen:R.isSettingsOpen,timerStepInput:R.timerStepInput,setTimerStepInput:R.setTimerStepInput,saveStatus:R.saveStatus,saveTimerStep:R.saveTimerStep,theme:R.theme,handleThemeToggle:R.handleThemeToggle}),e.jsx("input",{ref:o.workoutsFileInputRef,type:"file",accept:"application/json",className:"hidden",onChange:o.handleWorkoutsFileChange}),e.jsx("input",{ref:m.templatesFileInputRef,type:"file",accept:"application/json",className:"hidden",onChange:m.handleTemplatesFileChange}),e.jsx(ce,{open:c,onOpenChange:h=>{d(h),h||(v(""),f(null))},title:"Удалить аккаунт и все данные?",description:"Это действие необратимо и удалит все ваши данные.",confirmText:"Удалить аккаунт",cancelText:"Отмена",variant:"danger",confirmDisabled:C.trim().length===0,onConfirm:J,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-300",children:["Для подтверждения введите ваш e-mail: ",e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.email})]}),e.jsx("input",{type:"email",value:C,onChange:h=>{v(h.target.value),u&&f(null)},placeholder:(t==null?void 0:t.email)||"Введите ваш e-mail",className:"mt-1 block w-full px-3 py-2 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",style:{background:"#18181b",color:"#fafafa",border:"1px solid #3f3f46"}}),u&&e.jsx("p",{className:"text-xs text-red-400",children:u})]})}),e.jsx(Oe,{isOpen:p.isCleanDataDialogOpen,onClose:()=>p.setIsCleanDataDialogOpen(!1),isLoadingWorkoutsForDeletion:p.isLoadingWorkoutsForDeletion,isLoadingTemplatesForDeletion:p.isLoadingTemplatesForDeletion,openDeleteWorkoutsDialog:p.openDeleteWorkoutsDialog,openDeleteTemplatesDialog:p.openDeleteTemplatesDialog}),e.jsx(Ae,{isOpen:p.isDeleteWorkoutsDialogOpen,onClose:p.closeDeleteWorkoutsDialog,workoutDateGroups:p.workoutDateGroups,selectedWorkoutDates:p.selectedWorkoutDates,isDeletingWorkouts:p.isDeletingWorkouts,areAllWorkoutDatesSelected:p.areAllWorkoutDatesSelected,toggleWorkoutDateSelection:p.toggleWorkoutDateSelection,selectAllWorkoutDates:p.selectAllWorkoutDates,clearWorkoutSelection:p.clearWorkoutSelection,handleDeleteSelectedWorkouts:p.handleDeleteSelectedWorkouts}),e.jsx(Le,{isOpen:p.isDeleteTemplatesDialogOpen,onClose:p.closeDeleteTemplatesDialog,templatesForDeletion:p.templatesForDeletion,selectedTemplateIds:p.selectedTemplateIds,isDeletingTemplates:p.isDeletingTemplates,areAllTemplatesSelected:p.areAllTemplatesSelected,toggleTemplateSelection:p.toggleTemplateSelection,selectAllTemplates:p.selectAllTemplates,clearTemplateSelection:p.clearTemplateSelection,handleDeleteSelectedTemplates:p.handleDeleteSelectedTemplates}),e.jsx(ge,{open:o.isImportSuccessOpen,onOpenChange:h=>{h||o.closeImportSuccessToast()},onClose:o.closeImportSuccessToast,message:o.importSuccessMessage||"Импорт тренировок завершён. Откройте календарь, чтобы посмотреть тренировки.",variant:o.toastVariant}),e.jsx(Me,{isOpen:m.isTemplatesImportDialogOpen,pendingTemplatesDuplicates:m.pendingTemplatesDuplicates,isImportingTemplates:m.isImportingTemplates,templatesImportAction:m.templatesImportAction,onClose:m.closeTemplatesImportDialog,handleImportTemplatesOnlyNew:m.handleImportTemplatesOnlyNew,handleImportTemplatesOverwrite:m.handleImportTemplatesOverwrite}),e.jsx(Pe,{isOpen:o.isWorkoutsImportDialogOpen,pendingWorkoutsImport:o.pendingWorkoutsImport,pendingWorkoutsFileName:o.pendingWorkoutsFileName,pendingWorkoutsNewDatesSummary:o.pendingWorkoutsNewDatesSummary,isImportingWorkouts:o.isImportingWorkouts,importAction:o.importAction,onClose:o.closeWorkoutsImportDialog,handleConfirmImportWorkoutsOnly:o.handleConfirmImportWorkoutsOnly,handleImportOnlyNewWorkouts:o.handleImportOnlyNewWorkouts,handleExportThenImportWorkouts:o.handleExportThenImportWorkouts}),e.jsx(Te,{isOpen:j.isWeightTrackerOpen,onClose:()=>j.setIsWeightTrackerOpen(!1),bodyWeights:j.bodyWeights,loadingWeights:j.loadingWeights,weightChartData:j.weightChartData,weightStats:j.weightStats,newWeight:j.newWeight,newWeightDate:j.newWeightDate,savingWeight:j.savingWeight,deletingWeightId:j.deletingWeightId,weightDateInputRef:j.weightDateInputRef,isDeleteWeightConfirmOpen:j.isDeleteWeightConfirmOpen,weightToDelete:j.weightToDelete,setNewWeight:j.setNewWeight,setNewWeightDate:j.setNewWeightDate,setIsDeleteWeightConfirmOpen:j.setIsDeleteWeightConfirmOpen,handleAddWeight:j.handleAddWeight,handleDeleteWeight:j.handleDeleteWeight,handleOpenDeleteWeightConfirm:j.handleOpenDeleteWeightConfirm})]})};export{Ge as default};
