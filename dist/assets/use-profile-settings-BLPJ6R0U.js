import{r as t}from"./vendor-CITejod9.js";function b(){const[n,f]=t.useState(()=>{try{const e=localStorage.getItem("settings:timerStep");return e?Number(e):30}catch{return 30}}),[m,l]=t.useState(()=>String(n)),[h,a]=t.useState("idle"),r=t.useRef(null),[i,g]=t.useState(()=>{try{const e=localStorage.getItem("settings:theme");if(e==="light"||e==="dark"||e==="auto")return e}catch{}return"auto"}),[S,p]=t.useState(!1);t.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),t.useEffect(()=>{const e=document.documentElement,c=document.querySelector('meta[name="theme-color"]'),d=(u,w)=>{(u==="auto"?w?"light":"dark":u)==="light"?(e.classList.add("light-theme"),c&&c.setAttribute("content","#f5f5f7")):(e.classList.remove("light-theme"),c&&c.setAttribute("content","#0a0a0b"))},T=(()=>{if(typeof window>"u"||!window.matchMedia)return!1;try{return window.matchMedia("(prefers-color-scheme: light)").matches}catch{return!1}})();if(d(i,T),typeof window>"u"||!window.matchMedia)return;const s=window.matchMedia("(prefers-color-scheme: light)"),o=u=>{d(i,u.matches)};if(typeof s.addEventListener=="function")return s.addEventListener("change",o),()=>{s.removeEventListener("change",o)};if(typeof s.addListener=="function")return s.addListener(o),()=>{s.removeListener(o)}},[i]);const v=t.useCallback(e=>{g(e);try{localStorage.setItem("settings:theme",e)}catch{}},[]),y=t.useCallback(()=>{r.current&&clearTimeout(r.current);const e=parseInt(m,10);if(!isNaN(e)&&e>=1&&e<=300){a("saving"),f(e);try{localStorage.setItem("settings:timerStep",String(e))}catch{}r.current=setTimeout(()=>{a("success"),r.current=setTimeout(()=>{a("idle")},500)},350)}else l(String(n)),a("idle")},[m,n]);return{timerStep:n,timerStepInput:m,setTimerStepInput:l,saveStatus:h,saveTimerStep:y,theme:i,handleThemeChange:v,isSettingsOpen:S,setIsSettingsOpen:p}}export{b as u};
