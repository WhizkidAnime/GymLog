import{r as n}from"./vendor-CITejod9.js";const p=20,c=new Map,e=[];function d(t){const s=e.indexOf(t);for(s!==-1&&e.splice(s,1),e.push(t);e.length>p;){const a=e.shift();a&&c.delete(a)}}function m({key:t,initialState:s,ttl:a=600*1e3}){const u=n.useRef(!1),[o,l]=n.useState(()=>{const i=c.get(t);if(i){if(Date.now()-i.timestamp<a)return d(t),i.data;{c.delete(t);const f=e.indexOf(t);f!==-1&&e.splice(f,1)}}return s}),r=n.useCallback(()=>{c.set(t,{data:o,timestamp:Date.now()}),d(t)},[t,o]);return n.useEffect(()=>(u.current=!0,()=>{u.current=!1,r()}),[r]),[o,l,r]}export{m as u};
